﻿@{
  ViewData["Title"] = "Smart Meter Data";
  Layout = "_Layout";
}

<div class="container-fluid">
  <div class="col-xl-8 col-lg-7">
    <div class="d-flex justify-content-center align-items-center mb-4">
      <button id="prevDay" class="btn btn-outline-secondary me-2">&#8592;</button>

      <input type="date" id="selectedDate" class="form-control text-center" style="max-width: 200px;" value="2025-03-21" />

      <button id="nextDay" class="btn btn-outline-secondary ms-2">&#8594;</button>
    </div>
    <div class="card shadow mb-4">
      <div class="card-header py-3">
        <h6 class="m-0 font-weight-bold text-primary">Verbruiksinzicht</h6>
      </div>
      <div class="card-body">
        <div class="chart-area" style="width:100%;height:100%;">
          <canvas id="userConsumptionChart"></canvas>
          <div class="row">
            <div class="col">
              <table class="table table-bordered table-striped">
                <thead class="thead-light">
                  <tr>
                    <th class="text-center">Jouw score</th>
                    <th class="text-center">Gemiddelde score van stroomnet</th>
                  </tr>
                </thead>
                <tbody>
                  <tr id="comparisonRow" style="padding-top:5px;">
                    <td class="left text-center">49.2%</td>
                    <td class="right text-center">43.2%</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
          <a href="/Home/GreenEnergyForecast">
            <div id="netmixFeedback" class="mt-3 p-3 bg-success text-white rounded shadow-sm">
              Wil je dit vasthouden? Check hier wanneer je het beste je apparaten kunt gebruiken.
            </div>
          </a>
        </div>
      </div>
    </div>

  </div>
</div>
<script src="~/js/smart-meter-data-usage-chart.js"></script>
<script src="~/js/user-consumption-feedback.js"></script>
<script>
  const row = document.getElementById('comparisonRow');
  const leftCell = row.querySelector('.left');
  const rightCell = row.querySelector('.right');

  // Strip % and convert to numbers
  const leftValue = parseFloat(leftCell.textContent.replace('%', ''));
  const rightValue = parseFloat(rightCell.textContent.replace('%', ''));

  // Apply colors based on comparison
  if (leftValue > rightValue) {
    leftCell.style.color = 'green';
  } else {
    leftCell.style.color = 'red';
  }
</script>


